
  <div class="table-div">
    <p-table tableStyleClass="table-class" #dt1 [value]="concerts" styleClass="p-datatable-striped  p-datatable-sm "
             [globalFilterFields]="['id','name','musicalCategoryDto.category','locationDto.country','locationDto.town','price','date']" [rowHover]="true"
             [(selection)]="selectedOrder" [paginator]="true" [rows]="5" [showCurrentPageReport]="true" dataKey="id" selectionMode="multiple"
             currentPageReportTemplate="Showing {first} to {last} of {totalRecords} concerts" >
      <ng-template pTemplate="caption">
        <div class="flex align-items-center justify-content-between">  <i class="pi pi-list" style="font-size: 22px"></i> Concerts List


        </div>
      </ng-template>

      <ng-template pTemplate="header">
        <tr>
          <th pSortableColumn="name">Name <p-sortIcon field="name"></p-sortIcon></th>
          <th>Category
            <p-columnFilter field="musicalCategoryDto.category" matchMode="equals" display="menu">
              <ng-template pTemplate="filter" let-value let-filter="filterCallback">
                <p-dropdown [ngModel]="value" [options]="statuses" (onChange)="filter($event.value)" placeholder="Any">
                  <ng-template let-option pTemplate="item">
                    <span [class]="'customer-badge status-' + option.value">{{option.label}}</span>
                  </ng-template>
                </p-dropdown>
              </ng-template>
            </p-columnFilter>
          </th>
          <th pSortableColumn="locationDto.country">Country <p-sortIcon field="locationDto.country"></p-sortIcon></th>
          <th pSortableColumn="locationDto.town">Town <p-sortIcon field="registeredAt"></p-sortIcon></th>
          <th>Cost<p-columnFilter type="numeric" field="price" display="menu" ></p-columnFilter></th>
          <th>Date <p-columnFilter type="date" field="date" display="menu"></p-columnFilter></th>
          <th>Options </th>


        <tr>
          <th>
            <input pInputText type="text" (input)="dt1.filter($any($event.target).value, 'name', 'contains')" placeholder="Search by Name" class="p-column-filter">
          </th>
          <th>
            <input pInputText type="text" (input)="dt1.filter($any($event.target).value, 'musicalCategoryDto.category', 'contains')" placeholder="Search by Category" class="p-column-filter">
          </th>
          <th>
            <input pInputText type="text" (input)="dt1.filter($any($event.target).value, 'locationDto.country', 'contains')" placeholder="Search by Order Contry" class="p-column-filter">
          </th>
          <th>
            <input pInputText type="text" (input)="dt1.filter($any($event.target).value, 'locationDto.town', 'contains')" placeholder="Search by Town" class="p-column-filter">
          </th>
          <th>Unit Price</th>
          <th>Select Date</th><th>Select Option</th>


        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-concert>
        <tr>
          <td>{{concert.name}}</td>
          <td>{{concert.musicalCategoryDto.category}}</td>
          <td>{{concert.locationDto.country}}</td>
          <td>{{concert.locationDto.town}}</td>
          <td>{{concert.price}}</td>
          <td>{{concert.date | date}}</td>

          <td>
            <button pButton pRipple title="Buy Ticket " class="p-button-rounded p-button-success" (click)="showDialog(concert)">
              Get Tickets
            </button>
            <button pButton pRipple title="Buy Ticket " class="p-button-rounded p-button-help" (click)="showArtists(concert)">
              View artists
            </button>

          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>

  <p-dialog styleClass="p-fluid" header="Title" [(visible)]="display" [closable]="false" header="Buy Tickets" [modal]="true">
    <h4>Choose the number of tickets.
      <br>The maximum is 10.</h4>
    <ng-template pTemplate="content">
      <p-inputNumber (onInput)="calculateTotal()"[(ngModel)]="ticketsNumber" mode="decimal" [showButtons]="true" buttonLayout="vertical" spinnerMode="vertical"
                     [min] = "1"  [max] = "10" decrementButtonClass="p-button-secondary" incrementButtonClass="p-button-secondary" incrementButtonIcon="pi pi-plus" decrementButtonIcon="pi pi-minus"></p-inputNumber>
      <h4>Total: {{total.toFixed(2)}}</h4>
    </ng-template>
    <ng-template pTemplate="footer" >
      <button pButton pRipple label="Buy" icon="pi pi-check" class="p-button-text" (click)="buyConcertTicket()"></button>
      <button pButton pRipple label="Cancel" icon="pi pi-times" class="p-button-text" (click)="cancelOperation()"></button>
    </ng-template>
  </p-dialog>
  <p-toast position="bottom-center" key="tlr"></p-toast>

  <p-dialog styleClass="p-fluid" header="Artists" [(visible)]="displayArtists" [closable]="true" header="All Artists" [modal]="true">
    <h4>Artists for this concert</h4>
    <ng-template pTemplate="content">
      <table class="table table-striped table-bordered">
        <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
          <th>BirthDate</th>
          <th>Gender</th>
          <th>Geographic Region</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let artist of artistsList">
          <td>{{artist.name}}</td>
          <td>{{artist.description}}</td>
          <td>{{artist.birthDate}}</td>
          <td>{{artist.gender}}</td>
          <td>{{artist.geographicRegion}}</td>
        </tr>
        </tbody>
      </table>
    </ng-template>
    <ng-template pTemplate="footer" >
      <h5>You can find some artists in other concerts</h5>
    </ng-template>
  </p-dialog>
